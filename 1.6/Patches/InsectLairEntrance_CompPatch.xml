<?xml version="1.0" encoding="utf-8"?>
<Patch>

  <!-- Remplace CompProperties_Sealable vanilla par notre version conditionnelle -->
  <Operation Class="PatchOperationSequence">
    <operations>

      <!-- Supprimer le comp vanilla -->
      <li Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[defName="InsectLairEntrance"]/comps/li[@Class="CompProperties_Sealable"]</xpath>
      </li>

      <!-- Ajouter notre comp conditionnel -->
      <li Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[defName="InsectLairEntrance"]/comps</xpath>
        <value>
          <li Class="CompProperties_Sealable">
            <compClass>InsectLairIncident.CompSealable_Conditional</compClass>
            <sealTexPath>UI/Commands/FillInCaveEntrance</sealTexPath>
            <sealCommandLabel>Collapse cave entrance</sealCommandLabel>
            <sealCommandDesc>Choose a colonist to permanently collapse the entrance. Anything or anyone left below will be lost forever.</sealCommandDesc>
            <cannotSealLabel>Cannot collapse (Hive Queen alive)</cannotSealLabel>
            <confirmSealText>Collapsing the cave entrance is permanent. Anything or anyone left below will be lost forever.{0}\n\nAre you sure you want to continue?</confirmSealText>
            <destroyPortal>true</destroyPortal>
          </li>
        </value>
      </li>

    </operations>
  </Operation>

</Patch>
